{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { Bubble, GiftedChat } from \"react-native-gifted-chat\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar firebase = require(\"firebase\");\n\nrequire(\"firebase/firestore\");\n\nvar Chat = function (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  var _super = _createSuper(Chat);\n\n  function Chat() {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _super.call(this);\n    var firebaseConfig = {\n      apiKey: \"AIzaSyBtt9vShgdL-46-bVaMjuUYgHY7WKQVuWs\",\n      authDomain: \"chat-ab583.firebaseapp.com\",\n      projectId: \"chat-ab583\",\n      storageBucket: \"chat-ab583.appspot.com\",\n      messagingSenderId: \"395742845331\"\n    };\n\n    if (!firebase.apps) {\n      firebase.initializeApp(firebaseConfig);\n    }\n\n    _this.state = {\n      messages: [],\n      uid: []\n    };\n    _this.referenceChatMessages = firebase.firestore().collection(\"messages\");\n\n    if (_this.referenceChatMessages === null / undefined) {\n      Alert.alert(\"The message has failed to send!\");\n    }\n\n    _this.unsubscribe = _this.referenceChatMessages.onSnapshot(_this.onCollectionUpdate);\n\n    onCollectionUpdate = function onCollectionUpdate(querySnapshot) {\n      var messages = [];\n      querySnapshot.forEach(function (doc) {\n        var data = doc.data();\n        messages.push({\n          _id: data._id,\n          text: data.text,\n          createdAt: data.createdAt.toDate(),\n          user: data.user\n        });\n      });\n    };\n\n    _this.unsubscribeMessageUser = _this.referenceMessageUser.onSnapshot(_this.onCollectionUpdate);\n\n    addMessage = function addMessage() {\n      _this.referenceChatMessages.add({\n        text: 'Teslist',\n        uid: _this.state.uid\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var name = this.props.route.params.name;\n      this.authUnsubscribe = firebase.auth().onAuthStateChanged(function (user) {\n        if (!user) {\n          firebase.auth().signInAnonymously();\n        }\n\n        _this2.setState({\n          uid: user.uid,\n          messages: []\n        });\n\n        _this2.unsubscribe = _this2.referenceChatMessages.orderBy(\"createdAt\", \"desc\").onSnapshot(_this2.onCollectionUpdate);\n      });\n    }\n  }, {\n    key: \"onSend\",\n    value: function onSend() {\n      var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.setState(function (previousState) {\n        return {\n          messages: GiftedChat.append(previousState.messages, messages)\n        };\n      });\n    }\n  }, {\n    key: \"renderBubble\",\n    value: function renderBubble(props) {\n      return _jsx(Bubble, _objectSpread(_objectSpread({}, props), {}, {\n        wrapperStyle: {\n          right: {\n            backgroundColor: \"#0096FF\"\n          }\n        }\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var name = this.props.route.params.name;\n      var color = this.props.route.params.color;\n      this.props.navigation.setOptions({\n        title: name\n      });\n      return _jsxs(View, {\n        style: {\n          backgroundColor: color,\n          flex: 1\n        },\n        children: [_jsx(GiftedChat, {\n          renderBubble: this.renderBubble.bind(this),\n          messages: this.state.messages,\n          onSend: function onSend(messages) {\n            return _this3.onSend(messages);\n          },\n          user: {\n            _id: 1\n          }\n        }), Platform.OS === \"android\" ? _jsx(KeyboardAvoidingView, {\n          behavior: \"height\"\n        }) : null]\n      });\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n\nexport { Chat as default };\nvar styles = StyleSheet.create({\n  container: {}\n});","map":{"version":3,"sources":["C:/Users/baile/Documents/hello-world/components/Chat.js"],"names":["React","Bubble","GiftedChat","firebase","require","Chat","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","apps","initializeApp","state","messages","uid","referenceChatMessages","firestore","collection","undefined","Alert","alert","unsubscribe","onSnapshot","onCollectionUpdate","querySnapshot","forEach","doc","data","push","_id","text","createdAt","toDate","user","unsubscribeMessageUser","referenceMessageUser","addMessage","add","name","props","route","params","authUnsubscribe","auth","onAuthStateChanged","signInAnonymously","setState","orderBy","previousState","append","right","backgroundColor","color","navigation","setOptions","title","flex","renderBubble","bind","onSend","Platform","OS","Component","styles","StyleSheet","create","container"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport { View, Text, StyleSheet, Platform, KeyboardAvoidingView } from \"react-native\";\r\nimport { Bubble, GiftedChat } from \"react-native-gifted-chat\";\r\nimport { Alert } from \"react-native-web\";\r\n\r\nconst firebase = require(\"firebase\");\r\nrequire(\"firebase/firestore\");\r\n\r\nexport default class Chat extends React.Component {\r\n  constructor() {\r\n    super();  \r\n    const firebaseConfig = {\r\n      apiKey: \"AIzaSyBtt9vShgdL-46-bVaMjuUYgHY7WKQVuWs\",\r\n      authDomain: \"chat-ab583.firebaseapp.com\",\r\n      projectId: \"chat-ab583\",\r\n      storageBucket: \"chat-ab583.appspot.com\",\r\n      messagingSenderId: \"395742845331\",\r\n    };\r\n\r\n    if (!firebase.apps) {\r\n      firebase.initializeApp(firebaseConfig);\r\n    }\r\n\r\n    this.state = {\r\n      //  messages state\r\n      messages: [],\r\n      uid: [],\r\n    };\r\n  \r\n   this.referenceChatMessages = firebase.firestore().collection(\"messages\");\r\n   if (this.referenceChatMessages === null/undefined) {\r\n   Alert.alert(\"The message has failed to send!\")\r\n   }\r\n   this.unsubscribe = this.referenceChatMessages.onSnapshot(\r\n     this.onCollectionUpdate\r\n   );\r\n\r\n   onCollectionUpdate = (querySnapshot) => {\r\n   const messages = [];\r\n   // go through each document\r\n   querySnapshot.forEach((doc) => {\r\n     // get the QueryDocumentSnapshot's data\r\n     let data = doc.data();\r\n     messages.push({\r\n       _id: data._id,\r\n       text: data.text,\r\n       createdAt: data.createdAt.toDate(),\r\n       user: data.user,\r\n     });\r\n   });\r\n  }\r\n\r\n  this.unsubscribeMessageUser = this.referenceMessageUser.onSnapshot(\r\n    this.onCollectionUpdate\r\n  );\r\n\r\n  addMessage = () => {\r\n  this.referenceChatMessages.add({\r\n  text: 'Teslist',\r\n  uid: this.state.uid,\r\n  })\r\n  }\r\n  \r\n}\r\n  \r\n\r\n  componentDidMount() {\r\n    let name = this.props.route.params.name; // name prop passed over from state from start.js\r\n    \r\n   this.authUnsubscribe = firebase.auth().onAuthStateChanged((user) => {\r\n     if (!user) {\r\n       firebase.auth().signInAnonymously();\r\n     }\r\n     this.setState({\r\n       uid: user.uid,\r\n       messages: [],\r\n     });\r\n     this.unsubscribe = this.referenceChatMessages\r\n       .orderBy(\"createdAt\", \"desc\")\r\n       .onSnapshot(this.onCollectionUpdate);\r\n   });\r\n }\r\n\r\n  onSend(messages = []) {\r\n    this.setState((previousState) => ({\r\n      messages: GiftedChat.append(previousState.messages, messages), //appends messages objects\r\n    }));\r\n  }\r\n\r\n  renderBubble(props) {\r\n    // changes the right spawn texts AKA YOU sending them\r\n    return (\r\n      <Bubble\r\n        {...props}\r\n        wrapperStyle={{\r\n          right: {\r\n            backgroundColor: \"#0096FF\",\r\n          },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let name = this.props.route.params.name; // both color and name props\r\n    let color = this.props.route.params.color;\r\n\r\n    this.props.navigation.setOptions({ title: name });\r\n\r\n    return (\r\n      // start of DOM return statement\r\n      <View\r\n        style={{\r\n          backgroundColor: color,\r\n          flex: 1,\r\n        }}\r\n      >\r\n        <GiftedChat\r\n          renderBubble={this.renderBubble.bind(this)}\r\n          messages={this.state.messages}\r\n          onSend={(messages) => this.onSend(messages)}\r\n          user={{ _id: 1 }}\r\n        />\r\n        {Platform.OS === \"android\" ? (\r\n          <KeyboardAvoidingView behavior=\"height\" />\r\n        ) : null}\r\n\r\n        {}\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\ncontainer: {\r\n\r\n},\r\n\r\n})\r\n\r\n"]},"metadata":{},"sourceType":"module"}